= self-host seafile

== What is seafile

https://www.seafile.com/en/home/[Seafile] is an open source file sync&share

== generate environment file

[source,bash]
----
./scripts/create-env.sh
----

Modify the `.env` file

== nginx

Edit the variables in the script.
This script will generate a nginx config.

[source,bash]
----
./scripts/nginx.sh
----

== seafile configuration

add this line to `/opt/seafile-data/seafile/conf/seafile.conf`
----
[fileserver]
max_download_dir_size=10000
----

== backup

. sync the main folder and the .env
----
sudo rsync -az --progress --verbose .env seafile  user@remote:/backup/seafile
----
. set `root` user as owner
+
----
chown -R root:root /backup/seafile/data/
----
. try your backup
.. edit the `SEAFILE_SERVER_HOSTNAME` in `.env`
.. make up
.. set on the webpage
... `system admin`
... `settings`
... `URL`
.... `SERVICE_URL`
.... `FILE_SERVER_ROOT`
.. make down
.. make up

== Resource

* manual: https://manual.seafile.com/deploy/[deploy seafile]
